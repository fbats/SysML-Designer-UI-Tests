--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _sD67UDMzEeiRZ4kXU2JqQQ,_dzmbEDNZEeiRZ4kXU2JqQQ,_T3lvoDMyEeiRZ4kXU2JqQQ,_Z_ds0DMyEeiRZ4kXU2JqQQ,_xz4rwDQYEeiRde_P_PIz8w
Element-Name: IBD_CreateConnector
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _jEsTcDQYEeiRde_P_PIz8w
Runtime-Version: 2.2.0.201705230341
Save-Time: 4/9/18 10:42 AM
Testcase-Type: ecl

------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa
Content-Type: text/plain
Entry-Name: .description

Create an port in IBD with the tool Features/Port
- create port on a part
- create port on the IBD diagram

Expected result: 
- ports are displayed as bordered node
- ports are created under semantic element
------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa--
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

// Open ibd diagram
/*get-view "Model Explorer" | get-tree | select "test/model.uml/<Model> Model/<<Block>> <Class> block1/ibd diagram" 
    | get-menu -path Open | click*/
get-view "Model Explorer" | get-tree | select test | get-menu -path Refresh | click
with [get-view "Model Explorer" | get-tree] {
    select test | get-menu -path Refresh | click
    select test | double-click
    select "*test/model.uml/<Model> Model/<<Block>> <Class> block1/ibd diagram" 
    | get-menu -path Open | click
}
    
// Check diagram is opened
get-editor "ibd diagram" | get-diagram -index 1 | get-edit-part -name "ibd diagram"

// Create connector between Parts' Ports
with [get-editor "ibd diagram"] {
    with [get-palette] {
        with [get-palette-entry Connector] {
            mouse-move 58 8 button1 -height 27 -width 293
            mouse-press 58 8 button1 -height 27 -width 293
            mouse-release 58 8 button1 524288 -height 27 -width 293
        }
    }
    with [get-diagram -index 1 | get-edit-part -name "ibd diagram"] {
        mouse-move 716 88 -height 417 -width 883
        with [get-edit-part -name "ibd diagram" | get-edit-part 
            -className DNodeContainerViewNodeContainerCompartmentEditPart] {
            with [get-edit-part -name "part1 : block2 [1]" | get-edit-part -name "B2P1 : " | get-edit-part 
                -className WorkspaceImageEditPart] {
                mouse-move 6 2 button1 -height 10 -width 10
                mouse-press 6 2 button1 -height 10 -width 10
                mouse-release 6 2 button1 524288 -height 10 -width 10
            }
            with [get-edit-part -name "part3 : block4 [1]"] {
                with [get-edit-part -name "B4P1 : " | get-edit-part -className WorkspaceImageEditPart] {
                    mouse-move 2 3 button1 -height 10 -width 10
                    mouse-press 2 3 button1 -height 10 -width 10
                    mouse-release 2 3 button1 524288 -height 10 -width 10
                }
            }
        }
    }
}

// Check Connector is created
get-editor "ibd diagram" | get-diagram -index 1 | get-edit-part -name "ibd diagram" | get-edit-part -name "ibd diagram" 
	| get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "part3 : block4 [1]" 
    | get-edit-part -name "B4P1 : " | get-target-connection -path 0 | get-edit-part 
            -className DEdgeNameEditPart
    
// Create connector between part's port and Block port
with [get-editor "ibd diagram"] {
    with [get-palette] {
        with [get-palette-entry Connector] {
            mouse-move 105 4 button1 -height 27 -width 293
            mouse-press 105 4 button1 -height 27 -width 293
            mouse-release 105 4 button1 524288 -height 27 -width 293
        }
    }
    with [get-diagram -index 1 | get-edit-part -name "ibd diagram" | get-edit-part -name "ibd diagram"] {
        mouse-move 703 255 -height 375 -width 705
        with [get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart] {
            with [get-edit-part -name "part2 : block3 [1]"] {
                with [get-edit-part -name "B3P1 : " | get-edit-part -className WorkspaceImageEditPart] {
                    mouse-move 5 6 button1 -height 10 -width 10
                    mouse-press 5 6 button1 -height 10 -width 10
                    mouse-release 5 6 button1 524288 -height 10 -width 10
                }
            }
        }
        with [get-edit-part -name "«ProxyPort» B1P1 : " | get-edit-part -className WorkspaceImageEditPart] {
            mouse-move 5 1 button1 -height 10 -width 10
            mouse-press 5 1 button1 -height 10 -width 10
            mouse-release 5 1 button1 524288 -height 10 -width 10
        }
    }
}

// Check connector is displayed
get-editor "ibd diagram" | get-diagram -index 1 | get-edit-part -name "ibd diagram" | get-edit-part -name "ibd diagram" 
	| get-edit-part -name "«ProxyPort» B1P1 : " | get-target-connection -path 0 | get-edit-part 
            -className DEdgeNameEditPart

// Save Diagram
get-button "Save (M1+S)" | click
      
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
